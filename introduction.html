<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.547">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Team 8">
<meta name="dcterms.date" content="2025-04-17">

<title>Job Market Analysis - Mind the Gap: Gender, Wages, and the Workforce Divide</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Job Market Analysis</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./introduction.html" aria-current="page"> 
<span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./data_analysis.html"> 
<span class="menu-text">Data Cleaning &amp; Exploration</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./eda.html"> 
<span class="menu-text">Exploratory Data Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./skill_gap_analysis.html"> 
<span class="menu-text">Skill Gap Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./ml_methods.html"> 
<span class="menu-text">ML Methods</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./nlp_methods.ipynb"> 
<span class="menu-text">NLP Methods</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#why-is-this-topic-important" id="toc-why-is-this-topic-important" class="nav-link" data-scroll-target="#why-is-this-topic-important">Why Is This Topic Important?</a></li>
  <li><a href="#key-trends-in-2024" id="toc-key-trends-in-2024" class="nav-link" data-scroll-target="#key-trends-in-2024">Key Trends in 2024</a></li>
  <li><a href="#expected-findings" id="toc-expected-findings" class="nav-link" data-scroll-target="#expected-findings">Expected Findings</a></li>
  <li><a href="#literature-review" id="toc-literature-review" class="nav-link" data-scroll-target="#literature-review">Literature Review</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Mind the Gap: Gender, Wages, and the Workforce Divide</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Team 8 </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 17, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Over the past two decades, gender equality in the global labor market has improved significantly. However, disparities in hiring, pay, and career advancement remain pervasive. According to <span class="citation" data-cites="ilo2023wage">(<a href="#ref-ilo2023wage" role="doc-biblioref">Organization (2023)</a>)</span>, women earned, on average, 20% less than men globally in 2023. Moreover, women continue to be underrepresented in leadership positions and high-paying industries, highlighting persistent challenges in achieving workplace equity.</p>
<p>In the United States, gender equality is further influenced by state-level political ideologies. Labor policies such as minimum wage regulations, paid parental leave, and workplace protections vary significantly between conservative (red) and liberal (blue) states, leading to differences in wage equality and female workforce participation <span class="citation" data-cites="blau2017gender">(<a href="#ref-blau2017gender" role="doc-biblioref">Blau and Kahn (2017)</a>)</span>. Examining these policy variations is crucial to understanding the systemic factors shaping gender-based employment disparities.</p>
</section>
<section id="why-is-this-topic-important" class="level2">
<h2 class="anchored" data-anchor-id="why-is-this-topic-important">Why Is This Topic Important?</h2>
<div style="text-align: center;">
<img src="reference/intro_1.png" alt="Why Is This Topic Important" width="600">
<p style="font-size: 0.9em; color: gray;">
<span class="citation" data-cites="chatgpt2025illustration">(<a href="#ref-chatgpt2025illustration" role="doc-biblioref">ChatGPT (2025)</a>)</span>
</p>
</div>
<p>Gender disparities in the labor market not only impact fairness and equity, but also have profound implications for economic growth, business performance, and social development. Persistent pay inequality, occupational segregation, and gender discrimination in hiring can limit women’s labor force participation and hinder overall economic sustainability.</p>
<p>Moreover, as labor policies diverge across states, it becomes increasingly important to analyze their impact on gendered employment patterns. Differences in wage transparency laws, parental leave policies, and anti-discrimination protections can either exacerbate or mitigate the gender wage gap. By exploring these trends, this research aims to provide data-driven insights to support policies promoting gender equality in the workforce.</p>
</section>
<section id="key-trends-in-2024" class="level2">
<h2 class="anchored" data-anchor-id="key-trends-in-2024">Key Trends in 2024</h2>
<p>Several key trends make this a crucial area of study in 2024:</p>
<ol type="1">
<li><strong>Persistence of the Pay Gap</strong> – <span class="citation" data-cites="blau2017gender">(<a href="#ref-blau2017gender" role="doc-biblioref">Blau and Kahn (2017)</a>)</span> found that the closing of the gender pay gap slowed after 2010, with 38% of the gap unexplained by education or experience. This persistent disparity may be attributed to implicit bias or industry segregation.<br>
</li>
<li><strong>Industry Gender Segregation</strong> – Women continue to be overrepresented in industries such as education and healthcare, while comprising less than 30% of the workforce in engineering and computer science <span class="citation" data-cites="bls2023labor">(<a href="#ref-bls2023labor" role="doc-biblioref">Labor Statistics (2023)</a>)</span>.</li>
</ol>
</section>
<section id="expected-findings" class="level2">
<h2 class="anchored" data-anchor-id="expected-findings">Expected Findings</h2>
<p>This study is expected to identify the following trends:</p>
<ol type="1">
<li><strong>Gender hiring patterns across industries</strong> – Men continue to dominate the tech industry, while the healthcare and education sectors remain female-dominated <span class="citation" data-cites="basu2023gender">(<a href="#ref-basu2023gender" role="doc-biblioref">Basu et al. (2023)</a>)</span>.<br>
</li>
<li><strong>Impact of the policy environment on gender equality</strong> – States with progressive labor policies (blue states) are expected to perform better in closing the gender wage gap and increasing female participation in high-paying industries. Conversely, red states are likely to exhibit larger pay gaps and lower rates of female career advancement <span class="citation" data-cites="padova2024gender">(<a href="#ref-padova2024gender" role="doc-biblioref">Padova and Dhabi (2024)</a>)</span>.</li>
</ol>
<p>By integrating data across states and industries, this study will reveal how policy environments and industry characteristics interact to shape gender disparities in employment. The findings will contribute to evidence-based labor policies aimed at reducing workforce inequalities.</p>
</section>
<section id="literature-review" class="level2">
<h2 class="anchored" data-anchor-id="literature-review">Literature Review</h2>
<p>Some studies on gender disparities in hiring have focused on the persistent inequalities shaped by organizational structures, labor market conditions, cultural backgrounds, and political influences. <span class="citation" data-cites="campero2019gender">(<a href="#ref-campero2019gender" role="doc-biblioref">Campero and Fernandez (2019)</a>)</span> explore how the gender composition of the labor force impacts hiring outcomes, finding that both men and women face disadvantages when applying for positions where the opposite gender dominates. Similarly, <span class="citation" data-cites="gorman2005gender">(<a href="#ref-gorman2005gender" role="doc-biblioref">Gorman (2005)</a>)</span> highlights the role of gender stereotypes and group biases in hiring decisions. Selection criteria that emphasize traditionally masculine traits tend to reduce women’s representation in certain industries, whereas female decision-makers are more likely to hire other women. <span class="citation" data-cites="birkelund2022gender">(<a href="#ref-birkelund2022gender" role="doc-biblioref">Birkelund et al. (2022)</a>)</span> take a cross-national approach, revealing minimal discrimination against women in hiring but noting bias against men in some European countries. Their findings suggest that hiring biases can vary depending on institutional and cultural contexts.</p>
<p>Some research also demonstrates how the intersection of gender disparities and political influences makes labor market dynamics even more complex. <span class="citation" data-cites="may2017gender">(<a href="#ref-may2017gender" role="doc-biblioref">May and McGarvey (2017)</a>)</span> examine geographic differences in gender representation across occupations and find that conservative-leaning states tend to have more pronounced occupational segregation by gender, while blue states exhibit more integrated labor markets. This suggests that cultural and policy differences between conservative and liberal states contribute to disparities in hiring practices and workforce diversity. Expanding on this analysis, <span class="citation" data-cites="mcveigh2007red">(<a href="#ref-mcveigh2007red" role="doc-biblioref">McVeigh and Sobolewski (2007)</a>)</span> link occupational segregation to political outcomes, arguing that Republican-leaning counties often have more rigid gender-based occupational divisions, reinforcing economic and social inequality. These findings indicate that gender-based employment disparities are not just the result of individual biases or company-level practices, but are also embedded in broader political and cultural environments, shaping both labor market participation and electoral behavior.</p>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-basu2023gender" class="csl-entry" role="listitem">
<span class="smallcaps">Basu, S., B. E. Landon, R. L. Jr. Phillips, and A. Bitton</span>. (2023): <span>“<a href="https://doi.org/10.1093/has/qxad090">Gender wage gap among health care workers across educational levels</a>,”</span> <em>Health Affairs Scholar</em>, 2, qxad090.
</div>
<div id="ref-birkelund2022gender" class="csl-entry" role="listitem">
<span class="smallcaps">Birkelund, G. E., B. Lancee, E. N. Larsen, J. G. Polavieja, J. Radl, and R. Yemane</span>. (2022): <span>“<a href="https://doi.org/10.1093/esr/jcab043">Gender discrimination in hiring: Evidence from a cross-national harmonized field experiment</a>,”</span> <em>European Sociological Review</em>, 38, 337–54.
</div>
<div id="ref-blau2017gender" class="csl-entry" role="listitem">
<span class="smallcaps">Blau, F. D., and L. M. Kahn</span>. (2017): <span>“<a href="https://doi.org/10.1257/jel.20160995">The gender wage gap: Extent, trends, and explanations</a>,”</span> <em>Journal of Economic Literature</em>, 55, 789–865.
</div>
<div id="ref-campero2019gender" class="csl-entry" role="listitem">
<span class="smallcaps">Campero, S., and R. M. Fernandez</span>. (2019): <span>“<a href="https://doi.org/10.1093/sf/soy097">Gender composition of labor queues and gender disparities in hiring</a>,”</span> <em>Social Forces</em>, 97, 1487–1516.
</div>
<div id="ref-chatgpt2025illustration" class="csl-entry" role="listitem">
<span class="smallcaps">ChatGPT</span>. (2025): <span>“Illustration of Gender Disparities and Labor Policy Impact,”</span>AI-generated visual content.
</div>
<div id="ref-gorman2005gender" class="csl-entry" role="listitem">
<span class="smallcaps">Gorman, E. H.</span> (2005): <span>“<a href="https://doi.org/10.1177/000312240507000408">Gender stereotypes, same-gender preferences, and organizational variation in the hiring of women: Evidence from law firms</a>,”</span> <em>American Sociological Review</em>, 70, 702–28.
</div>
<div id="ref-bls2023labor" class="csl-entry" role="listitem">
<span class="smallcaps">Labor Statistics, U. S. B. of</span>. (2023): <a href="https://www.bls.gov/cps/">Labor Force Statistics from the Current Population Survey</a>,U.S. Bureau of Labor Statistics.
</div>
<div id="ref-may2017gender" class="csl-entry" role="listitem">
<span class="smallcaps">May, A. M., and M. G. McGarvey</span>. (2017): <span>“Gender, occupational segregation, and the cultural divide: Are red states different than blue states?”</span> <em>Review of Regional Studies</em>, 47, 175–99.
</div>
<div id="ref-mcveigh2007red" class="csl-entry" role="listitem">
<span class="smallcaps">McVeigh, R., and J. M. Sobolewski</span>. (2007): <span>“<a href="https://doi.org/10.1086/518872">Red counties, blue counties, and occupational segregation by sex and race</a>,”</span> <em>American Journal of Sociology</em>, 113, 446–506.
</div>
<div id="ref-ilo2023wage" class="csl-entry" role="listitem">
<span class="smallcaps">Organization, I. L.</span> (2023): <a href="https://www.ilo.org/global/publications/books/WCMS_862669">Global Wage Report 2022–2023: The Impact of Inflation and COVID-19 on Wages and Purchasing Power</a>,International Labour Organization.
</div>
<div id="ref-padova2024gender" class="csl-entry" role="listitem">
<span class="smallcaps">Padova, U. of, and N. Y. U. A. Dhabi</span>. (2024): <span>“<a href="https://doi.org/10.1371/journal.pone.0234567">Gender inequality in the united states: A state-by-state analysis</a>,”</span> <em>PLOS ONE</em>, 19, e0234567.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>